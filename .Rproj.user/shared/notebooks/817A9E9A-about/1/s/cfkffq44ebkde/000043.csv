"0","library(shiny)"
"0","library(shinyjs)"
"0",""
"0","# Shiny UI"
"0","ui <- fluidPage("
"0","  shinyjs::useShinyjs(),"
"0","  titlePanel(""This is the choice between the living and the dead""), "
"0","  # Placed on top of the video to indicate what's it about."
"0","  tags$iframe("
"0","    src = ""https://www.youtube.com/embed/Rrb5ElwwSh0?autoplay=1"","
"0","    width = ""640"","
"0","    height = ""360"""
"0","  ), # Intro to the eyes and the aim: shut the eyes"
"0","  "
"0","  sidebarLayout("
"0","    sidebarPanel("
"0","      h3(""Select Eyes:""),"
"0","      radioButtons(""eyeColor"", """","
"0","                   choices = c(""Brown eyes"", ""Blue eyes"", ""Green eyes"")"
"0","      ),"
"0","    ), # Choosing eyes to interact with"
"0","    mainPanel("
"0","      h3(""Last Statement:""),"
"0","      textOutput(""lastStatement""),"
"0","      br(), # Display last statement to inform user of making choices"
"0","      actionButton(""closeEyes"", ""Close their eyes""),"
"0","      actionButton(""burnBody"", ""Condemn their body by burning them"")"
"0","    ) # Two actional ways to shut the eyes"
"0","  )"
"0",")"
"0",""
"0","# Shiny Server"
"0","server <- function(input, output, session) {"
"0","  # Read data from CSV"
"0","  merged_data <- read.csv(""merged_data.csv"")"
"0","  "
"0","  # Function to change video based on user interaction"
"0","updateVideo <- function(session, newSrc) {"
"0","  session$sendCustomMessage(type = ""updateVideo"", message = list(src = newSrc))"
"0","}"
"0",""
"0","  # Render last statement based on selected eye color"
"0","  output$lastStatement <- renderText({"
"0","    eye_color <- switch(input$eyeColor,"
"0","      ""Brown eyes"" = ""Brown"","
"0","      ""Blue eyes"" = ""Blue"","
"0","      ""Green eyes"" = ""Green"""
"0","    ) # Linking variables based on eye color"
"0",""
"0","    if (eye_color == """") {"
"0","      last_statements <- merged_data$Last.Statement[is.na(merged_data$EyeColor)]"
"0","    } else {"
"0","      last_statements <- merged_data$Last.Statement[merged_data$EyeColor == eye_color]"
"0","    } # Linking last statements to eye color respectively"
"0",""
"0","    if (length(last_statements) == 0) {"
"0","      return(""This person has left no words."")"
"0","    } # In case there isn't a last word"
"0",""
"0","    random_statement <- sample(last_statements, 1)"
"0","    random_statement"
"0","  }) # Display a random statement based on the chosen eye"
"0",""
"0","  # Initialize counters for both buttons"
"0","  closeEyesCount <- reactiveVal(0)"
"0","  burnBodyCount <- reactiveVal(0)"
"0","  "
"0","  # Observe events for closing eyes button"
"0","  observeEvent(input$closeEyes, {"
"0","    # Increment the click count for ""Close their eyes"" button"
"0","    closeEyesCount(closeEyesCount() + 1)"
"0","    "
"0","      videoUrl <- switch("
"0","            closeEyesCount(),"
"0","    ""https://www.youtube.com/embed/RScGNAsh9DMg?autoplay=1"","
"0","    ""https://www.youtube.com/embed/RScGNAsh9DMg?autoplay=1"""
"0","  )"
"0",""
"0","  # Play the determined video"
"0","  updateVideo(session, videoUrl)"
"0","  "
"0","    # Check if the click count reaches 3 or 5"
"0","    if (closeEyesCount() == 3) {"
"0","      # Play the first video respective to ""Close their eyes"""
"0","      updateVideo(session, ""https://www.youtube.com/embed/RngcgrYjuf5U?autoplay=1"")"
"0","    } # Forgiveness is hope"
"0","    if (closeEyesCount() == 5) {"
"0","      # Play the second video respective to ""Close their eyes"""
"0","      updateVideo(session, ""https://www.youtube.com/embed/RScGNAsh9DMg?autoplay=1"") # Hope wins death"
"0","    }"
"0","  })"
"0",""
"0","  # Observe events for burning body button"
"0","  observeEvent(input$burnBody, {"
"0","    # Increment the click count for ""Condemn their body by burning them"" button"
"0","    burnBodyCount(burnBodyCount() + 1)"
"0",""
"0","    # Check if the click count reaches 3 or 5"
"0","    if (burnBodyCount() == 3) {"
"0","      # Play the first video respective to ""Condemn their body by burning them"""
"0","      updateVideo(session, ""https://www.youtube.com/embed/RiBvlNIYJkAo?autoplay=1"")"
"0","    } # Anger of fire"
"0","    if (burnBodyCount() == 5) {"
"0","      # Play the second video respective to ""Condemn their body by burning them"""
"0","      updateVideo(session, ""https://www.youtube.com/embed/RfPudGbjwzTE?autoplay=1"")"
"0","    } # Hate will backfire"
"0","  })"
"0","}"
"0",""
"0","# Run the Shiny app"
"0","shinyApp(ui, server)"
"2","
Listening on http://127.0.0.1:7977
"
